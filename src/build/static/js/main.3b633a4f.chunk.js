(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{138:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),c=a.n(r),o=(a(78),a(43)),i=a(12),d=a(14),l=a.n(d),h=a(20),u=a(27),j=a(28),b=a(13),m=a(33),v=a(32),p=a(145),x=a(71),O=a(147),f=a(65),w=a(66),g=a(146),E=a(70),C=a(62),M=a(63),y=(a(83),a(45)),S=a(58),N=a.n(S),k=(a(84),a(34)),A=a.n(k),L=a(5),B=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).calendarRef=s.a.createRef(),e.componentDidMount=Object(h.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.isAuthenticated){t.next=4;break}e.setState({rightToolbarButtonSetup:"prev,next today addEventButton logoutButton"}),t.next=12;break;case 4:if(!A.a.get("cali-app-refresh-exists")){t.next=11;break}return t.next=7,fetch("/token",{method:"post",credentials:"include"});case 7:(n=A.a.get("cali-app-authenticated"))?e.setState({isAuthenticated:n,rightToolbarButtonSetup:"prev,next today addEventButton logoutButton"}):e.setState({rightToolbarButtonSetup:"prev,next today addEventButton loginButton"}),t.next=12;break;case 11:e.setState({rightToolbarButtonSetup:"prev,next today addEventButton loginButton"});case 12:if(!e.state.isAuthenticated){t.next=18;break}return t.next=15,e.fetchEvents();case 15:a=t.sent,t.next=19;break;case 18:a=[];case 19:e.setState({events:a}),e.fetchEvents=e.fetchEvents.bind(Object(b.a)(e)),e.handleEventClick=e.handleEventClick.bind(Object(b.a)(e)),e.showEventModal=e.showEventModal.bind(Object(b.a)(e)),e.hideEventModal=e.hideEventModal.bind(Object(b.a)(e)),e.showConfirmModal=e.showConfirmModal.bind(Object(b.a)(e)),e.hideConfirmModal=e.hideConfirmModal.bind(Object(b.a)(e)),e.showAddModal=e.showAddModal.bind(Object(b.a)(e)),e.hideAddModal=e.hideAddModal.bind(Object(b.a)(e)),e.processAdd=e.processAdd.bind(Object(b.a)(e)),e.processCancel=e.processCancel.bind(Object(b.a)(e)),e.handleLogout=e.handleLogout.bind(Object(b.a)(e)),e.handleLogin=e.handleLogin.bind(Object(b.a)(e)),e.showLoginModal=e.showLoginModal.bind(Object(b.a)(e)),e.hideLoginModal=e.hideLoginModal.bind(Object(b.a)(e));case 34:case"end":return t.stop()}}),t)}))),e.fetchEvents=Object(h.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/events/get?username=userone",{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.events);case 7:case"end":return e.stop()}}),e)}))),e.showEventModal=function(){e.setState({showEventModal:!0})},e.hideEventModal=function(){e.setState({showEventModal:!1})},e.showConfirmModal=function(){e.hideEventModal(),e.setState({showConfirmModal:!0})},e.hideConfirmModal=function(){e.setState({showConfirmModal:!1}),e.showEventModal()},e.showAddModal=function(){e.setState({newEvent:{title:"",start:"",end:""},showAddModal:!0})},e.hideAddModal=function(){e.setState({showAddModal:!1})},e.showLoginModal=function(){e.setState({showLoginModal:!0})},e.hideLoginModal=function(){e.setState({showLoginModal:!1})},e.handleEventClick=function(t){e.showEventModal(),e.setState({selectedEvent:{title:t.event.title,start:t.event.start,end:t.event.end}})},e.addEvent=function(){e.showAddModal()},e.handleLogin=Object(h.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/account/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.state.username,password:e.state.password})});case 2:if(e.setState({username:"",password:""}),!A.a.get("cali-app-authenticated")){t.next=8;break}return t.next=6,e.fetchEvents();case 6:a=t.sent,e.setState({events:a,isAuthenticated:A.a.get("cali-app-authenticated"),showLoginModal:!1,rightToolbarButtonSetup:"prev,next today addEventButton logoutButton"});case 8:case"end":return t.stop()}}),t)}))),e.handleLogout=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/account/logout",{method:"post",credentials:"include"});case 2:e.setState({events:[],isAuthenticated:!1,rightToolbarButtonSetup:"prev,next today addEventButton loginButton"});case 3:case"end":return t.stop()}}),t)}))),e.processAdd=Object(h.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.state.newEvent.title){t.next=9;break}return t.next=3,fetch("/api/events/add/",{method:"post",credentials:"include",body:JSON.stringify({username:e.state.username,newEvent:e.state.newEvent}),headers:{"Content-Type":"application/json"}});case 3:return t.next=5,e.fetchEvents();case 5:a=t.sent,e.setState({events:a,showAddModal:!1}),t.next=10;break;case 9:window.alert("Event must have a title");case 10:case"end":return t.stop()}}),t)}))),e.processCancel=Object(h.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/events/cancel/",{method:"post",credentials:"include",body:JSON.stringify({username:e.state.username,eventToDelete:e.state.selectedEvent}),headers:{"Content-Type":"application/json"}});case 2:return t.next=4,e.fetchEvents();case 4:a=t.sent,e.setState({events:a,showConfirmModal:!1});case 6:case"end":return t.stop()}}),t)}))),e.state={events:[],showEventModal:!1,selectedEvent:{},selectedEvent_fullCalendarObject:{},showConfirmModal:!1,showAddModal:!1,showLoginModal:!1,newEvent:{title:"",start:"",end:""},isAuthenticated:A.a.get("cali-app-authenticated")||!1,rightToolbarButtonSetup:"",timezoneOffset:(new Date).getTimezoneOffset()/60,username:"",password:""},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{style:{height:"80vh"},children:Object(L.jsx)(E.a,{plugins:[C.a,M.a],events:this.state.events,height:"100%",eventClick:this.handleEventClick,ref:this.calendarRef,dayMaxEvents:4,fixedWeekCount:!1,eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short",omitZeroMinute:!1},customButtons:{addEventButton:{text:"Add Event",click:this.addEvent},logoutButton:{text:"Log out",click:this.handleLogout},loginButton:{text:"Log in",click:this.showLoginModal}},headerToolbar:{right:"".concat(this.state.rightToolbarButtonSetup)}})}),Object(L.jsxs)(p.a,{show:this.state.showEventModal,onHide:this.hideEventModal,children:[Object(L.jsxs)(y.a,{children:[Object(L.jsx)(x.a,{children:this.state.selectedEvent.title}),Object(L.jsx)(O.a,{variant:"close",onClick:this.hideEventModal})]}),Object(L.jsxs)(f.a,{children:[Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"col-md-4",children:"Start:"}),Object(L.jsx)("div",{className:"col-md-8",children:new Date(this.state.selectedEvent.start).toLocaleString()})]}),Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"col-md-4",children:"End:"}),Object(L.jsx)("div",{className:"col-md-8",children:new Date(this.state.selectedEvent.end).toLocaleString()})]})]}),Object(L.jsx)(w.a,{children:Object(L.jsx)(O.a,{variant:"danger",onClick:this.showConfirmModal,children:"Cancel Event"})})]}),Object(L.jsxs)(p.a,{show:this.state.showConfirmModal,onHide:this.hideConfirmModal,children:[Object(L.jsx)(f.a,{children:Object(L.jsx)("div",{className:"row",children:Object(L.jsx)("div",{className:"col-md-12",children:Object(L.jsx)("h4",{children:"Are you sure you want to cancel this event?"})})})}),Object(L.jsxs)(w.a,{children:[Object(L.jsx)(O.a,{variant:"danger",onClick:this.processCancel,children:"Yes"}),Object(L.jsx)(O.a,{variant:"secondary",onClick:this.hideConfirmModal,children:"No"})]})]}),Object(L.jsxs)(p.a,{show:this.state.showLoginModal,onHide:this.hideLoginModal,children:[Object(L.jsx)(f.a,{children:Object(L.jsxs)(g.a,{className:"mx-auto my-auto",children:[Object(L.jsx)(g.a.Group,{className:"mb-3 text-center",children:Object(L.jsx)("h1",{children:"Calendar-App"})}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Username:"}),Object(L.jsx)(g.a.Control,{value:this.state.username,type:"text",placeholder:"Enter Username",onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Password:"}),Object(L.jsx)(g.a.Control,{value:this.state.password,type:"password",placeholder:"Enter Password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(L.jsx)("div",{className:"text-start m-0",children:Object(L.jsx)("p",{className:"m-0",children:Object(L.jsx)("a",{className:"text-secondary",href:"./account/register",children:"Create an Account"})})})]})}),Object(L.jsx)(w.a,{children:Object(L.jsx)(O.a,{variant:"primary",onClick:this.handleLogin,children:"Log In"})})]}),Object(L.jsxs)(p.a,{show:this.state.showAddModal,onHide:this.hideAddModal,children:[Object(L.jsx)(f.a,{children:Object(L.jsxs)("form",{className:"form",children:[Object(L.jsx)("div",{className:"row mt-2",children:Object(L.jsxs)("div",{className:"col-md-12",children:[Object(L.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title: "}),Object(L.jsx)("input",{type:"text",className:"form form-control",name:"title",onChange:function(t){return e.setState({newEvent:{title:t.target.value,start:e.state.newEvent.start,end:e.state.newEvent.end}})}})]})}),Object(L.jsx)("div",{className:"row mt-2",children:Object(L.jsxs)("div",{className:"col-md-12",children:[Object(L.jsx)("label",{className:"form-label",htmlFor:"startDate",children:"Start: "}),Object(L.jsx)(N.a,{className:"form form-control",selected:this.state.newEvent.start,showTimeSelect:!0,dateFormat:"Pp",timeIntervals:15,onChange:function(t){return e.setState({newEvent:{title:e.state.newEvent.title,start:t,end:e.state.newEvent.end}})}})]})}),Object(L.jsx)("div",{className:"row mt-2",children:Object(L.jsxs)("div",{className:"col-md-12",children:[Object(L.jsx)("label",{className:"form-label",htmlFor:"endDate",children:"End: "}),Object(L.jsx)(N.a,{className:"form form-control",selected:this.state.newEvent.end,showTimeSelect:!0,dateFormat:"Pp",timeIntervals:15,onChange:function(t){return e.setState({newEvent:{title:e.state.newEvent.title,start:e.state.newEvent.start,end:t}})}})]})})]})}),Object(L.jsxs)(w.a,{children:[Object(L.jsx)(O.a,{variant:"success",onClick:this.processAdd,children:"Add Event"}),Object(L.jsx)(O.a,{variant:"secondary",onClick:this.hideAddModal,children:"Cancel"})]})]})]})}}]),a}(s.a.Component),T=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).handleCreateAccount=function(){var t=Object(h.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("../account/register",{method:"post",body:JSON.stringify({username:e.state.username,password:e.state.password}),headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:s=t.sent,alert(s.message),e.setState({username:"",password:""});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={username:"",password:""},e.handleCreateAccount=e.handleCreateAccount.bind(Object(b.a)(e)),e}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"",children:Object(L.jsxs)(g.a,{className:"w-25 mx-auto my-auto",onSubmit:this.handleCreateAccount,children:[Object(L.jsx)(g.a.Group,{className:"mb-3 text-center",children:Object(L.jsx)("h4",{children:"Create an Account"})}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Username:"}),Object(L.jsx)(g.a.Control,{value:this.state.username,type:"text",placeholder:"Enter Username",onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Password:"}),Object(L.jsx)(g.a.Control,{value:this.state.password,type:"password",placeholder:"Enter Password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(L.jsx)(g.a.Group,{className:"mb-3 text-center",children:Object(L.jsx)(O.a,{className:"w-100",variant:"primary",type:"submit",children:"Create"})})]})})})}}]),a}(s.a.Component),G=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).handleVerifySlack=function(){var t=Object(h.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("../account/slack/verify",{method:"post",body:JSON.stringify({username:e.state.username,password:e.state.password}),headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,e.setState({username:"",password:""}),t.next=7,n.json();case 7:s=t.sent,alert(s.message);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={username:"",password:""},e.handleVerifySlack=e.handleVerifySlack.bind(Object(b.a)(e)),e}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"",children:Object(L.jsxs)(g.a,{className:"w-25 mx-auto my-auto",onSubmit:this.handleVerifySlack,children:[Object(L.jsx)(g.a.Group,{className:"mb-3 text-center",children:Object(L.jsx)("h4",{children:"Verify Your Slack Account"})}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Username:"}),Object(L.jsx)(g.a.Control,{value:this.state.username,type:"text",placeholder:"Enter Username",onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(L.jsxs)(g.a.Group,{className:"mb-3",children:[Object(L.jsx)(g.a.Label,{children:"Password:"}),Object(L.jsx)(g.a.Control,{value:this.state.password,type:"password",placeholder:"Enter Password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(L.jsx)(g.a.Group,{className:"mb-3 text-center",children:Object(L.jsx)(O.a,{className:"w-100",variant:"primary",type:"submit",children:"Verify"})})]})})})}}]),a}(s.a.Component);var D=function(){return Object(L.jsx)(o.a,{children:Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(i.c,{children:[Object(L.jsx)(i.a,{path:"/",component:B,exact:!0}),Object(L.jsx)(i.a,{path:"/verify/slack",component:G}),Object(L.jsx)(i.a,{path:"/account/register",component:T})]})})})};c.a.render(Object(L.jsx)(o.a,{children:Object(L.jsx)(D,{})}),document.getElementById("root"))},78:function(e,t,a){}},[[138,1,2]]]);
//# sourceMappingURL=main.3b633a4f.chunk.js.map